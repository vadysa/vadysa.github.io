<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Video Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #181818;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            background: #232323;
            padding: 32px 24px;
            border-radius: 12px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
        }
        input[type="file"] {
            color: #fff;
            background: #333;
            border: 1px solid #444;
            padding: 8px;
            border-radius: 6px;
        }
        #playerContainer {
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #playerContainer video {
            display: block;
            width: 100%;
            max-width: 480px;
            background: #000;
        }
        #customControls {
            display: none;
            width: 100%;
            margin-top: 12px;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        #customControls div {
            display: flex;
            align-items: center;
            width: 100%;
            gap: 8px;
        }
        #currentTime {
            min-width: 48px;
            text-align: right;
            font-variant-numeric: tabular-nums;
        }
        #progressBar {
            flex: 1 1 120px;
            min-width: 80px;
            max-width: 400px;
        }
        #duration {
            min-width: 48px;
            text-align: left;
            font-variant-numeric: tabular-nums;
        }
        #muteBtn {
            padding: 4px 12px;
        }
        #volumeBar {
            width: 80px;
        }
        #fullscreenBtn {
            padding: 4px 12px;
        }
        /* –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ */
        #playerContainer:fullscreen, #playerContainer:-webkit-full-screen {
            background: #000;
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        #playerContainer:fullscreen video,
        #playerContainer:-webkit-full-screen video {
            width: 100vw !important;
            height: 100vh !important;
            max-width: 100vw !important;
            max-height: 100vh !important;
            object-fit: contain;
            background: #000;
            display: block;
        }
        #playerContainer:fullscreen #customControls,
        #playerContainer:-webkit-full-screen #customControls {
            width: 100vw !important;
            max-width: 100vw !important;
            position: absolute;
            left: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            padding-bottom: 20px;
        }
        #playerContainer:fullscreen #customControls.hide-controls,
        #playerContainer:-webkit-full-screen #customControls.hide-controls {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Simple Video Player</h2>
        <div id="videoNames" style="margin-bottom: 12px; text-align: center;">
          <div id="currentVideoName" style="font-weight: bold;"></div>
          <div id="previousVideoName" style="color: #aaa; font-size: 0.95em;"></div>
        </div>
        <input type="file" id="videoFile" accept="video/*,.mkv">
        <div id="playerContainer">
            <video id="videoPlayer" style="display:block; width:100%; max-width:480px; background:#000;"></video>
            <div id="customControls" style="display:none; width:100%; margin-top:12px; display: flex; flex-direction: row; align-items: center; gap: 8px; justify-content: center;">
                <button id="playPauseBtn">‚ñ∂Ô∏è</button>
                <span id="currentTime" style="min-width: 48px; text-align: right; font-variant-numeric: tabular-nums;">0:00</span>
                <input type="range" id="progressBar" min="0" value="0" step="0.01" style="flex: 1 1 120px; min-width:80px; max-width:400px;">
                <span id="duration" style="min-width: 48px; text-align: left; font-variant-numeric: tabular-nums;">0:00</span>
                <button id="muteBtn" style="padding: 4px 12px;">üîä</button>
                <input type="range" id="volumeBar" min="0" max="1" step="0.01" value="1" style="width: 80px;">
                <button id="fullscreenBtn" style="padding: 4px 12px;">‚õ∂</button>
            </div>
        </div>
    </div>
    <script>
        const fileInput = document.getElementById('videoFile');
        const playerContainer = document.getElementById('playerContainer');
        const videoPlayer = document.getElementById('videoPlayer');
        const customControls = document.getElementById('customControls');
        const progressBar = document.getElementById('progressBar');
        const currentTimeElem = document.getElementById('currentTime');
        const durationElem = document.getElementById('duration');
        const muteBtn = document.getElementById('muteBtn');
        const volumeBar = document.getElementById('volumeBar');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const playPauseBtn = document.getElementById('playPauseBtn');

        function formatTime(sec) {
            if (isNaN(sec)) return '0:00';
            const m = Math.floor(sec / 60);
            const s = Math.floor(sec % 60);
            return `${m}:${s.toString().padStart(2, '0')}`;
        }

        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –≤ localStorage
                const prevName = localStorage.getItem('currentVideoName');
                if (prevName) {
                    localStorage.setItem('previousVideoName', prevName);
                }
                localStorage.setItem('currentVideoName', file.name);
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
                updateVideoNames();
                const url = URL.createObjectURL(file);
                videoPlayer.src = url;
                videoPlayer.load();
                videoPlayer.play();
            }
        });
        function updateVideoNames() {
            const cur = localStorage.getItem('currentVideoName') || '';
            const prev = localStorage.getItem('previousVideoName') || '';
            document.getElementById('currentVideoName').textContent = cur ? `–¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ: ${cur}` : '';
            document.getElementById('previousVideoName').textContent = prev ? `–ü—Ä–æ—à–ª–æ–µ –≤–∏–¥–µ–æ: ${prev}` : '';
        }
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        updateVideoNames();

        videoPlayer.addEventListener('play', () => {
            if (document.fullscreenElement === playerContainer || document.webkitFullscreenElement === playerContainer) {
                customControls.classList.add('hide-controls');
            } else {
                customControls.style.display = 'flex';
            }
            playPauseBtn.textContent = '‚è∏Ô∏è';
        });
        videoPlayer.addEventListener('pause', () => {
            customControls.classList.remove('hide-controls');
            customControls.style.display = 'flex';
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
        });
        videoPlayer.addEventListener('timeupdate', () => {
            if (!progressBar.getAttribute('max') || progressBar.max != videoPlayer.duration) {
                progressBar.max = videoPlayer.duration;
            }
            progressBar.value = videoPlayer.currentTime;
            currentTimeElem.textContent = formatTime(videoPlayer.currentTime);
        });
        progressBar.addEventListener('input', () => {
            videoPlayer.currentTime = progressBar.value;
        });
        videoPlayer.addEventListener('loadedmetadata', () => {
            progressBar.max = videoPlayer.duration;
            progressBar.value = 0;
            durationElem.textContent = formatTime(videoPlayer.duration);
            currentTimeElem.textContent = formatTime(0);
        });
        videoPlayer.addEventListener('volumechange', () => {
            volumeBar.value = videoPlayer.volume;
            muteBtn.textContent = videoPlayer.muted || videoPlayer.volume === 0 ? 'üîá' : 'üîä';
        });
        volumeBar.addEventListener('input', () => {
            videoPlayer.volume = volumeBar.value;
            videoPlayer.muted = (volumeBar.value == 0);
        });
        muteBtn.addEventListener('click', () => {
            videoPlayer.muted = !videoPlayer.muted;
            muteBtn.textContent = videoPlayer.muted ? 'üîá' : 'üîä';
        });
        fullscreenBtn.addEventListener('click', () => {
            const isFull = document.fullscreenElement === playerContainer || document.webkitFullscreenElement === playerContainer;
            if (!isFull) {
                if (playerContainer.requestFullscreen) {
                    playerContainer.requestFullscreen();
                } else if (playerContainer.webkitRequestFullscreen) {
                    playerContainer.webkitRequestFullscreen();
                } else if (playerContainer.msRequestFullscreen) {
                    playerContainer.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        });
        playPauseBtn.addEventListener('click', () => {
            if (videoPlayer.paused) {
                videoPlayer.play();
            } else {
                videoPlayer.pause();
            }
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ –∫–ª–∏–∫—É –Ω–∞ –≤–∏–¥–µ–æ
        videoPlayer.addEventListener('click', () => {
            if (videoPlayer.paused) {
                videoPlayer.play();
            } else {
                videoPlayer.pause();
            }
        });
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ –ø—Ä–æ–±–µ–ª—É
        document.addEventListener('keydown', (e) => {
            // –ù–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ —Ñ–æ–∫—É—Å –≤ input/textarea/button
            if (e.code === 'Space' && !['INPUT','TEXTAREA','BUTTON'].includes(document.activeElement.tagName)) {
                e.preventDefault();
                if (videoPlayer.paused) {
                    videoPlayer.play();
                } else {
                    videoPlayer.pause();
                }
            }
        });

        function handleFullscreenChange() {
            const isFullscreen = document.fullscreenElement === playerContainer || document.webkitFullscreenElement === playerContainer;
            if (isFullscreen && !videoPlayer.paused) {
                customControls.classList.add('hide-controls');
            } else {
                customControls.classList.remove('hide-controls');
                customControls.style.display = 'flex';
            }
        }
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);

        let cursorTimeout;
        function hideCursor() {
            document.body.style.cursor = 'none';
        }
        function showCursor() {
            document.body.style.cursor = '';
        }
        document.addEventListener('mousemove', () => {
            showCursor();
            clearTimeout(cursorTimeout);
            cursorTimeout = setTimeout(hideCursor, 1000);
        });
        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—É—Ä—Å–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
        showCursor();
    </script>
</body>
</html>
